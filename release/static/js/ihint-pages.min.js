'use strict';var _slicedToArray=function(){function a(b,c){var d=[],f=!0,g=!1,h=void 0;try{for(var k,j=b[Symbol.iterator]();!(f=(k=j.next()).done)&&(d.push(k.value),!(c&&d.length===c));f=!0);}catch(l){g=!0,h=l}finally{try{!f&&j['return']&&j['return']()}finally{if(g)throw h}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document);if(location.pathname.endsWith('index.html'))throw location.href=''+location.pathname.slice(0,0-'index.html'.length)+location.search,new Error('redirecting ...');else if(!location.search)throw location.href='?index',new Error('redirecting to index page');BSXml.start(['loading','footer']);var json=location.search.slice(1);BSFetch.get('articles/'+json+'.json?'+new Date().getTime()).then(function(a){BSXml.start(['article'],{dataset:{article:a},next:function next(){$('#loading').remove(),BSFetch.get('articles/'+$('#content').getAttribute('url')+'.md?'+new Date().getTime(),{restype:'text'}).then(function(c){Page.load(c)}).catch(function(c){throw $('#content').innerHTML='<center><h2>Oops! Try refresh</h2></center>',c});var b=$('#header').getAttribute('url');b&&BSFetch.get(b,{restype:'blob'}).then(function(c){Page.set_banner(c)}).catch(function(c){throw c}),Animate.init()}})}).catch(function(a){throw $('#loading').innerHTML='Page Not Found',a});var Page=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:'load',value:function load(b){var c=$('#title').innerHTML;document.title=c+' | iHint',$('#content').innerHTML=marked(b),[].forEach.call($$('img'),function(d){d.addEventListener('click',function(){window.open(d.getAttribute('src'))});var f=(d.alt.match(/ =[\d]+x[\d]+$/)||[])[0];if(f){d.alt=d.alt.replace(/ =[\d]+x[\d]+$/,'');var _size$slice$split=f.slice(2).split('x'),_size$slice$split2=_slicedToArray(_size$slice$split,2),g=_size$slice$split2[0],h=_size$slice$split2[1];d.width=g,d.height=h}}),[].forEach.call($$('pre code'),function(d){hljs.highlightBlock(d)}),location.hash&&setTimeout(function(){location.href=location.href},1e3)}},{key:'set_banner',value:function set_banner(b){var c=new FileReader;c.onload=function(d){$('#header').style.backgroundImage='url(\''+d.target.result+'\')'},c.readAsDataURL(b)}}]),a}(),Animate=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:'init',value:function init(){a.header=$('.header-container'),a.position=0===window.scrollY?'top':'content',a.positionY=[0,0],a.scroll(),a.wheel()}},{key:'wheel',value:function wheel(){window.addEventListener('wheel',function(b){if(0===window.scrollY&&0>b.deltaY&&'top'===a.position){if(1===header.classList.length)return;header.classList.remove('header-out'),header.classList.add('header-in'),a.position='top'}})}},{key:'scroll',value:function scroll(){a.ticking=!1,window.addEventListener('scroll',function(){a.positionY=[a.positionY[1],window.scrollY],a.ticking||window.requestAnimationFrame(function(){var _Animate$positionY=_slicedToArray(a.positionY,2),c=_Animate$positionY[0],d=_Animate$positionY[1];0===c&&d>c&&'top'===a.position?(header.classList.remove('header-in'),header.classList.add('header-out'),a.position='content'):0===d&&'content'===a.position?a.position='top':0<d&&0<c?a.position='content':0>c&&0>d&&'top'===a.position&&(header.classList.remove('header-out'),header.classList.add('header-in'),a.position='content'),a.ticking=!1}),a.ticking=!0})}}]),a}();