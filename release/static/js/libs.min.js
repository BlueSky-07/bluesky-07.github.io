'use strict';var _slicedToArray=function(){function f(g,h){var j=[],l=!0,m=!1,n=void 0;try{for(var p,o=g[Symbol.iterator]();!(l=(p=o.next()).done)&&(j.push(p.value),!(h&&j.length===h));l=!0);}catch(r){m=!0,n=r}finally{try{!l&&o['return']&&o['return']()}finally{if(m)throw n}}return j}return function(g,h){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return f(g,h);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function f(g,h){for(var l,j=0;j<h.length;j++)l=h[j],l.enumerable=l.enumerable||!1,l.configurable=!0,'value'in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}return function(g,h,j){return h&&f(g.prototype,h),j&&f(g,j),g}}();function _asyncToGenerator(f){return function(){var g=f.apply(this,arguments);return new Promise(function(h,j){function l(m,n){try{var o=g[m](n),p=o.value}catch(r){return void j(r)}return o.done?void h(p):Promise.resolve(p).then(function(r){l('next',r)},function(r){l('throw',r)})}return l('next')})}}function _classCallCheck(f,g){if(!(f instanceof g))throw new TypeError('Cannot call a class as a function')}function safeAdd(f,g){var h=(65535&f)+(65535&g);return(f>>16)+(g>>16)+(h>>16)<<16|65535&h}function bitRotateLeft(f,g){return f<<g|f>>>32-g}function md5cmn(f,g,h,j,l,m){return safeAdd(bitRotateLeft(safeAdd(safeAdd(g,f),safeAdd(j,m)),l),h)}function md5ff(f,g,h,j,l,m,n){return md5cmn(g&h|~g&j,f,g,l,m,n)}function md5gg(f,g,h,j,l,m,n){return md5cmn(g&j|h&~j,f,g,l,m,n)}function md5hh(f,g,h,j,l,m,n){return md5cmn(g^h^j,f,g,l,m,n)}function md5ii(f,g,h,j,l,m,n){return md5cmn(h^(g|~j),f,g,l,m,n)}function binlMD5(f,g){f[g>>5]|=128<<g%32,f[(g+64>>>9<<4)+14]=g;var h,j,l,m,n,o=1732584193,p=-271733879,r=-1732584194,u=271733878;for(h=0;h<f.length;h+=16)j=o,l=p,m=r,n=u,o=md5ff(o,p,r,u,f[h],7,-680876936),u=md5ff(u,o,p,r,f[h+1],12,-389564586),r=md5ff(r,u,o,p,f[h+2],17,606105819),p=md5ff(p,r,u,o,f[h+3],22,-1044525330),o=md5ff(o,p,r,u,f[h+4],7,-176418897),u=md5ff(u,o,p,r,f[h+5],12,1200080426),r=md5ff(r,u,o,p,f[h+6],17,-1473231341),p=md5ff(p,r,u,o,f[h+7],22,-45705983),o=md5ff(o,p,r,u,f[h+8],7,1770035416),u=md5ff(u,o,p,r,f[h+9],12,-1958414417),r=md5ff(r,u,o,p,f[h+10],17,-42063),p=md5ff(p,r,u,o,f[h+11],22,-1990404162),o=md5ff(o,p,r,u,f[h+12],7,1804603682),u=md5ff(u,o,p,r,f[h+13],12,-40341101),r=md5ff(r,u,o,p,f[h+14],17,-1502002290),p=md5ff(p,r,u,o,f[h+15],22,1236535329),o=md5gg(o,p,r,u,f[h+1],5,-165796510),u=md5gg(u,o,p,r,f[h+6],9,-1069501632),r=md5gg(r,u,o,p,f[h+11],14,643717713),p=md5gg(p,r,u,o,f[h],20,-373897302),o=md5gg(o,p,r,u,f[h+5],5,-701558691),u=md5gg(u,o,p,r,f[h+10],9,38016083),r=md5gg(r,u,o,p,f[h+15],14,-660478335),p=md5gg(p,r,u,o,f[h+4],20,-405537848),o=md5gg(o,p,r,u,f[h+9],5,568446438),u=md5gg(u,o,p,r,f[h+14],9,-1019803690),r=md5gg(r,u,o,p,f[h+3],14,-187363961),p=md5gg(p,r,u,o,f[h+8],20,1163531501),o=md5gg(o,p,r,u,f[h+13],5,-1444681467),u=md5gg(u,o,p,r,f[h+2],9,-51403784),r=md5gg(r,u,o,p,f[h+7],14,1735328473),p=md5gg(p,r,u,o,f[h+12],20,-1926607734),o=md5hh(o,p,r,u,f[h+5],4,-378558),u=md5hh(u,o,p,r,f[h+8],11,-2022574463),r=md5hh(r,u,o,p,f[h+11],16,1839030562),p=md5hh(p,r,u,o,f[h+14],23,-35309556),o=md5hh(o,p,r,u,f[h+1],4,-1530992060),u=md5hh(u,o,p,r,f[h+4],11,1272893353),r=md5hh(r,u,o,p,f[h+7],16,-155497632),p=md5hh(p,r,u,o,f[h+10],23,-1094730640),o=md5hh(o,p,r,u,f[h+13],4,681279174),u=md5hh(u,o,p,r,f[h],11,-358537222),r=md5hh(r,u,o,p,f[h+3],16,-722521979),p=md5hh(p,r,u,o,f[h+6],23,76029189),o=md5hh(o,p,r,u,f[h+9],4,-640364487),u=md5hh(u,o,p,r,f[h+12],11,-421815835),r=md5hh(r,u,o,p,f[h+15],16,530742520),p=md5hh(p,r,u,o,f[h+2],23,-995338651),o=md5ii(o,p,r,u,f[h],6,-198630844),u=md5ii(u,o,p,r,f[h+7],10,1126891415),r=md5ii(r,u,o,p,f[h+14],15,-1416354905),p=md5ii(p,r,u,o,f[h+5],21,-57434055),o=md5ii(o,p,r,u,f[h+12],6,1700485571),u=md5ii(u,o,p,r,f[h+3],10,-1894986606),r=md5ii(r,u,o,p,f[h+10],15,-1051523),p=md5ii(p,r,u,o,f[h+1],21,-2054922799),o=md5ii(o,p,r,u,f[h+8],6,1873313359),u=md5ii(u,o,p,r,f[h+15],10,-30611744),r=md5ii(r,u,o,p,f[h+6],15,-1560198380),p=md5ii(p,r,u,o,f[h+13],21,1309151649),o=md5ii(o,p,r,u,f[h+4],6,-145523070),u=md5ii(u,o,p,r,f[h+11],10,-1120210379),r=md5ii(r,u,o,p,f[h+2],15,718787259),p=md5ii(p,r,u,o,f[h+9],21,-343485551),o=safeAdd(o,j),p=safeAdd(p,l),r=safeAdd(r,m),u=safeAdd(u,n);return[o,p,r,u]}function binl2rstr(f){var g,h='',j=32*f.length;for(g=0;g<j;g+=8)h+=String.fromCharCode(255&f[g>>5]>>>g%32);return h}function rstr2binl(f){var g,h=[];for(h[(f.length>>2)-1]=void 0,g=0;g<h.length;g+=1)h[g]=0;var j=8*f.length;for(g=0;g<j;g+=8)h[g>>5]|=(255&f.charCodeAt(g/8))<<g%32;return h}function rstrMD5(f){return binl2rstr(binlMD5(rstr2binl(f),8*f.length))}function rstrHMACMD5(f,g){var h,n,j=rstr2binl(f),l=[],m=[];for(l[15]=m[15]=void 0,16<j.length&&(j=binlMD5(j,8*f.length)),h=0;16>h;h+=1)l[h]=909522486^j[h],m[h]=1549556828^j[h];return n=binlMD5(l.concat(rstr2binl(g)),512+8*g.length),binl2rstr(binlMD5(m.concat(n),640))}function rstr2hex(f){var g='0123456789abcdef',h='',j,l;for(l=0;l<f.length;l+=1)j=f.charCodeAt(l),h+=g.charAt(15&j>>>4)+g.charAt(15&j);return h}function str2rstrUTF8(f){return unescape(encodeURIComponent(f))}function rawMD5(f){return rstrMD5(str2rstrUTF8(f))}function hexMD5(f){return rstr2hex(rawMD5(f))}function rawHMACMD5(f,g){return rstrHMACMD5(str2rstrUTF8(f),str2rstrUTF8(g))}function hexHMACMD5(f,g){return rstr2hex(rawHMACMD5(f,g))}function md5(f,g,h){return g?h?rawHMACMD5(g,f):hexHMACMD5(g,f):h?rawMD5(f):hexMD5(f)}var lut=Array(256).fill().map(function(f,g){return(16>g?'0':'')+g.toString(16)}),formatUuid=function(_ref){var f=_ref.d0,g=_ref.d1,h=_ref.d2,j=_ref.d3;return lut[255&f]+lut[255&f>>8]+lut[255&f>>16]+lut[255&f>>24]+'-'+lut[255&g]+lut[255&g>>8]+'-'+lut[64|15&g>>16]+lut[255&g>>24]+'-'+lut[128|63&h]+lut[255&h>>8]+'-'+lut[255&h>>16]+lut[255&h>>24]+lut[255&j]+lut[255&j>>8]+lut[255&j>>16]+lut[255&j>>24]},getRandomValuesFunc=window.crypto&&window.crypto.getRandomValues?function(){var f=new Uint32Array(4);return window.crypto.getRandomValues(f),{d0:f[0],d1:f[1],d2:f[2],d3:f[3]}}:function(){return{d0:4294967296*Math.random()>>>0,d1:4294967296*Math.random()>>>0,d2:4294967296*Math.random()>>>0,d3:4294967296*Math.random()>>>0}};function uuid(){return formatUuid(getRandomValuesFunc())}var BSData=function(){function f(){_classCallCheck(this,f)}return _createClass(f,null,[{key:'object_to_json',value:function object_to_json(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(g)}},{key:'json_to_object',value:function json_to_object(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';return JSON.parse(g)}},{key:'object_to_body',value:function object_to_body(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h='';return Object.entries(g).forEach(function(_ref2){var _ref3=_slicedToArray(_ref2,2),j=_ref3[0],l=_ref3[1];h+='&'+j+'='+l}),h.slice(1)}},{key:'body_to_object',value:function body_to_object(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',h={};return g.split('&').map(function(j){return j.split('=')}).forEach(function(_ref4){var _ref5=_slicedToArray(_ref4,2),j=_ref5[0],l=_ref5[1];j=decodeURI(j),l=decodeURI(l),h[j]=l}),delete h[''],h}},{key:'formdata_to_object',value:function formdata_to_object(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new FormData;if(g instanceof FormData){var h={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var l,j=g.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(l=j.next()).done);_iteratorNormalCompletion=!0){var m=l.value,_entry=_slicedToArray(m,2),n=_entry[0],o=_entry[1];h[n]=o}}catch(p){_didIteratorError=!0,_iteratorError=p}finally{try{!_iteratorNormalCompletion&&j.return&&j.return()}finally{if(_didIteratorError)throw _iteratorError}}return h}throw new Error('arg must be an instance of FormData')}},{key:'object_to_formdata',value:function object_to_formdata(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=new FormData;return Object.entries(g).forEach(function(_ref6){var _ref7=_slicedToArray(_ref6,2),j=_ref7[0],l=_ref7[1];h.append(j,l)}),h}}]),f}(),BSRequest=function(){function f(){var l=this,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',h=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,f),this.url=g,this.config={},this.debug=h;for(var n,_loop=function(n){Object.defineProperty(l,n,{get:function get(){return this.config[n]},set:function set(o){this.config[n]=o}})},_arr2=['body','credentials','headers','method'],j=0;j<_arr2.length;j++)n=_arr2[j],_loop(n)}return _createClass(f,[{key:'info',value:function info(){return this.method+' \''+this.url+'\':'}},{key:'request',value:function request(){return new Request(this.url,this.config)}}]),f}(),BSFetch=function(){function f(){var _ref8=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_ref8$basepath=_ref8.basepath,g=void 0===_ref8$basepath?'':_ref8$basepath;_classCallCheck(this,f),this.basepath=g||location.hostname}return _createClass(f,[{key:'URL',value:function URL(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',h=this.basepath||location.hostname;return''+this.basepath+g}},{key:'head',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'headers':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',f.fetch(this.URL(D),'HEAD',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'get',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'json':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',f.fetch(this.URL(D),'GET',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'post',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'json':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',f.fetch(this.URL(D),'POST',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'put',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'status':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',f.fetch(this.URL(D),'PUT',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'delete',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'status':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',f.fetch(this.URL(D),'DELETE',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'patch',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'status':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',f.fetch(this.URL(D),'PATCH',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'options',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',v=arguments[1],l=v.headers,m=void 0===l?{}:l,n=v.cookies,o=void 0===n?'':n,p=v.debug;return regeneratorRuntime.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt('return',f.fetch(this.URL(u),'OPTIONS',{headers:m,cookies:o,debug:void 0!==p&&p}));case 1:case'end':return z.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'fetch',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'#',E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'GET',l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'json':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt('return',f.fetch(this.URL(D),E,{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return G.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()}],[{key:'global',value:function global(){window.BSFetch=f}},{key:'head',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'headers':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',this.fetch(D,'HEAD',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'get',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'json':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',this.fetch(D,'GET',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'post',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'json':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',this.fetch(D,'POST',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'put',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'status':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',this.fetch(D,'PUT',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'delete',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'status':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',this.fetch(D,'DELETE',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'patch',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'status':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt('return',this.fetch(D,'PATCH',{data:n,reqtype:p,restype:u,cookies:w,headers:A,debug:void 0!==B&&B}));case 1:case'end':return F.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'options',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',v=arguments[1],l=v.headers,m=void 0===l?{}:l,n=v.cookies,o=void 0===n?'':n,p=v.debug;return regeneratorRuntime.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt('return',this.fetch(u,'OPTIONS',{headers:m,cookies:o,debug:void 0!==p&&p}));case 1:case'end':return z.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()},{key:'fetch',value:function(){var h=_asyncToGenerator(regeneratorRuntime.mark(function j(){var D,E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'#',F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'GET',l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},m=l.data,n=void 0===m?{}:m,o=l.reqtype,p=void 0===o?'':o,r=l.restype,u=void 0===r?'json':r,v=l.cookies,w=void 0===v?'':v,z=l.headers,A=void 0===z?{}:z,B=l.debug;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if('string'==typeof E&&'string'==typeof F){H.next=2;break}throw new Error('BSFetch.fetch(url, method, {?...}): url/method must be a string');case 2:D=new BSRequest(E,void 0!==B&&B),D.headers=new Headers(A),F=F.toLowerCase(),D.method=HttpMethods.has(F)?F.toUpperCase():'GET',H.t0=D.method,H.next='HEAD'===H.t0?9:'GET'===H.t0?10:'PUT'===H.t0?12:'DELETE'===H.t0?12:'PATCH'===H.t0?12:'POST'===H.t0?13:'OPTIONS'===H.t0?24:26;break;case 9:u='response'===u?u:'headers';case 10:return n instanceof FormData?D.url+='?'+BSData.object_to_body(BSData.formdata_to_object(n)):0<Object.keys(n).length?D.url+='?'+BSData.object_to_body(n):'string'==typeof n&&0<n.length&&(D.url+='?'+BSData.object_to_body(BSData.json_to_object(n))),H.abrupt('break',26);case 12:u='response'===u?u:'status';case 13:H.t1=p,H.next='json'===H.t1?16:'formdata'===H.t1?19:21;break;case 16:return D.headers.set('Content-Type',ContentTypes.JSON),n instanceof FormData?D.body=BSData.object_to_json(BSData.formdata_to_object(n)):0<Object.keys(n).length?D.body=BSData.object_to_json(n):'string'==typeof n&&0<n.length&&(D.body=n),H.abrupt('break',23);case 19:return n instanceof FormData?D.body=n:0<Object.keys(n).length?D.body=BSData.object_to_formdata(n):'string'==typeof n&&0<n.length&&(D.body=BSData.object_to_formdata(BSData.json_to_object(n))),H.abrupt('break',23);case 21:D.headers.set('Content-Type',ContentTypes.FORM),n instanceof FormData?D.body=BSData.object_to_body(BSData.formdata_to_object(n)):0<Object.keys(n).length?D.body=BSData.object_to_body(n):'string'==typeof n&&0<n.length&&(D.body=BSData.object_to_body(BSData.json_to_object(n)));case 23:return H.abrupt('break',26);case 24:return u='response'===u?u:'headers',H.abrupt('break',26);case 26:return u=u.toLowerCase(),D.responseType=ResponseTypes.has(u)?u.toUpperCase():'JSON',''===w||'same'===w||'same-origin'===w||'default'===w||(!0===w||'true'===w||'include'===w?D.credentials='include':(!1===w||'false'===w||'none'===w)&&(D.credentials='omit')),H.abrupt('return',doRequest(D));case 30:case'end':return H.stop();}},j,this)}));return function g(){return h.apply(this,arguments)}}()}]),f}(),doRequest=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new BSRequest;return f.debug&&console.log(f.info(),f.request()),new Promise(function(g,h){fetch(f.request()).then(function(j){if(f.debug&&console.log(f.info(),j),'RESPONSE'===f.responseType)return j;if('STATUS'===f.responseType)return j.status;if(!j.ok){var l=new Error;throw l.message='cannot fetch resource: '+j.status,l.message+=j.statusText?' - '+j.statusText:'',l.response=j,l}switch(f.responseType){case'JSON':return j.json();case'TEXT':return j.text();case'BLOB':return j.blob();case'FORMDATA':return j.formData();case'ARRAYBUFFER':return j.arrayBuffer();case'HEADERS':return j.headers;}}).then(function(j){g(j)}).catch(function(j){h(j)})})},HttpMethods=new Set(['head','get','post','put','delete','options','patch']),ResponseTypes=new Set(['json','text','blob','formdata','arraybuffer','response','headers','status']),ContentTypes={JSON:'application/json; charset=utf-8',FORM:'application/x-www-form-urlencoded; charset=UTF-8',FORMDATA:'multipart/form-data'};